# Text-editor saturday

Today my avante.nvim setup was frustrating me and instead of tackling the
problem head on i just did some miscellaneous neovim config tinkering. This is
likely the result of severe adhd but such is life

## Ctrl+[ to ESC

I have a real problem with RSI (repetitive strain injury) overusing my left
pinky finger.

I am gonna try to use the Neovim has a built-in shortcut to use Ctrl+[ instead
of ESC. Specifically I use the Ctrl on the right side of my keyboard, and so I
use my right thumb to press right-ctrl and my pointer to hit the [

## Search keymaps with `<leader>sk`

There are so many keymaps. For example using search keymaps I found `<leader>ud`
(toggle diagnostics)

## Super search current file (or buffer) `<leader>sb`

Instead of just / to search your current file, can get a telescope-like picker
to search from snacks.picker

## Mini.surround

Working on using mini.surround for surround actions more. In React code I can

- Visual select some stuff
- Type `<leader>sat` (mnemonic: surround...add...tag)
- Then it pops up what tag to surround it with, and type div (no brackets)

## Working on quick select actions

I'm trying to work on using more efficient commands for selecting text blocks

Examples:

- vab - "select outer block" to quickly select blocks of code
- viw - select word
- vit - select inside tag e.g. `<div>hello</div>` selects hello
- vat - select "outside" e.g. `<div>hello</div>` selects whole thing
- va( - special command added by mini.ai to select current parens
  https://github.com/echasnovski/mini.ai
- ggVG - select whole file, then y to yank, which goes to system clipboard

Most of the time...for many years now...I go into visual mode (V), and use arrow
key or ctrl+d to visual-select blocks of code...not super efficient! Or for word
select I'd use "bve" (go back word...then enter visual mode, then forward
word...works but probably less idiomatic)

## Disabling arrow keys

Adding this block from kickstart.nvim is very effective at forcing you to stop
using arrow keys, and it also mentally prepares you to try to do even better
keymaps e.g. the "vab" to select block, and not just reach for hjkl...

```lua
-- TIP: Disable arrow keys in normal mode
vim.keymap.set('n', '<left>', '<cmd>echo "Use h to move!!"<CR>')
vim.keymap.set('n', '<right>', '<cmd>echo "Use l to move!!"<CR>')
vim.keymap.set('n', '<up>', '<cmd>echo "Use k to move!!"<CR>')
vim.keymap.set('n', '<down>', '<cmd>echo "Use j to move!!"<CR>')
```

## avante.nvim troubles

This is really what spurred me into my text-editor saturday meandering. My text
editor avante.nvim is started going crazy with "tool usage". Previously it
worked ok and it would generate diffs in the 'chat sidebar', and I'd accept them
with "A" in the sidebar then accept all with "ca" in the main area...vibe
coding.

However, the avante.nvim now has a crazy loading spinner and runs "tools" that
create edits instead, and is taking much longer. I tried enabling disable_tools
but it still runs them.

Maybe I should file a bug... I also considered alternative plugins but (a) I
don't want a copilot where it completes right where i'm typing

I tried to look into it a bit more and I found `<leader>ae` (avante edit) can
make much more straightforward edits to a selected block of code, but the
`<leader>aa` ask mode triggers the chat box, which ends up running tools and
going crazy

If the tools worked fast and well, I might consider keeping it, but I am having
trouble with it, but it gives lots of errors of lots of different varieties
including

- too many tokens
- unable to apply diff
- etc.

## Getting nightly from source repo with alias

I made an alias to update neovim nightly. I compile from the neovim source repo

```
alias upneo="cd ~/src/neovim/; git pull; rm -rf build; rm -rf .deps/; make CMAKE_BUILD_TYPE=RelWithDebInfo CMAKE_EXTRA_FLAGS="-DCMAKE_INSTALL_PREFIX=$HOME/.local"; make install; cd -"
```

I'm not sure if rm -rf .deps is needed but once I had trouble with a dep not
able to update properly without it. This installs to e.g. ~/.local/bin/nvim

I previously would get the appimage but the 'containerization' of appimages
behaved funny

## New key shortcuts

- `<leader>pc` for copying current filename to clipboard

```lua
-- Copy path to clipboard
vim.keymap.set('n', '<leader>pc', function()
  local filepath = vim.fn.expand '%'
  vim.fn.setreg('+', filepath)
end, {
  noremap = true,
  silent = true,
  desc = 'Copy path to clipboard',
})
```

## Pretty-ts-errors

Trying to use pretty-ts-errors.nvim
https://github.com/youyoumu/pretty-ts-errors.nvim haven't got to work but seems
nice :)

## Better-escape

https://github.com/max397574/better-escape.nvim quickly hit jj to go from insert
mode to normal, this plugin makes it so that the keymap allows you to see the
keys quickly rather than see a delay

## Trying out rose-pine

Trying rose-pine color scheme. It is kinda funny with tons of italic but it's
cute

## Themery

Also trying themery for toggling color schemes
https://github.com/zaldih/themery.nvim, with onedark, kanagawa, tokyonight,
rose-pine, and gruvbox available for toggling. Once you select, it is persistent
across sessions which is nice

## New autotag and autopairs plugins

I substituted nvim-ts-autotag with ts-autotag.nvim

```lua
{
  'tronikelis/ts-autotag.nvim',
  opts = {},
  event = 'VeryLazy',
}
```

Also substituted nvim-autopair with mini.pairs

```lua
{
  'echasnovski/mini.pairs',
  version = false,
  opts = {}
},
```

## Wishlist

I wish the auto-import of dependencies from blink.cmp in typescript would import
"as type" e.g.

```typescript
import type { IThing } from "thing";
```

It does not insert types. Luckily eslint-plugin-import can auto-fix this

I have this somewhat lengthy eslint-plugin-import block to also sort imports

```typescript
{
  "import/no-unresolved": "off",
  "import/order": [
    "error",
    {
      named: true,
      "newlines-between": "always",
      alphabetize: {
        order: "asc",
      },
      groups: [
        "builtin",
        ["external", "internal"],
        ["parent", "sibling", "index", "object"],
        "type",
      ],
      pathGroups: [
        {
          group: "builtin",
          pattern: "react",
          position: "before",
        },
        {
          group: "external",
          pattern: "@mui/icons-material",
          position: "after",
        },
      ],

      pathGroupsExcludedImportTypes: ["react"],
    },
  ],
}
```

# Feedback

I often feel like my way of neovimming is pretty weird so feedback welcome. If
you got any tips let me know!
